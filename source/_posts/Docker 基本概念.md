---
title: Docker 基本概念
date: 2025-09-22 17:32:56
categories:
  - Docker
tags:
  - Docker
---
##### 最近在自學Docker，萬事起頭難，這邊紀錄一些Docker的基本知識跟名詞解釋。
<!-- more -->
#
#
#
#
---
* ##### 以比較常用的開發環境(.Net 8 + Angular + Windows Server)當範例，先來看看ChatGPT幫我們整理的沒有容器化前可能會遇到那些困擾：
    1. ##### 前端（Angular）：
        1. ##### Node.js 版本不一致
            1. ##### 開發者 A 用 Node.js 18，開發者 B 用 Node.js 20，導致 Angular build 結果不同。
            2. ##### 有人裝了全域 Angular CLI v17，有人還在 v15，建置過程出現 bug。
        2. ##### 環境重建麻煩：
            1. ##### 新人加入專案時，要先安裝 Node.js、Angular CLI、各種套件。
            2. ##### npm install 過程可能因為不同系統（Windows/macOS/Linux）出現不一致錯誤。
        3. ##### 部署複雜：
            1. ##### 上線伺服器需要先裝 Node.js，然後手動跑 npm run build，再把 dist 複製到伺服器上。
            2. ##### 不同伺服器上的 Node.js 版本不一致，導致 build 結果不同。
  #
  #
  #
  #   
    2. ##### 後端（.NET 8 Web API）：
        1. ##### SDK/Runtime 版本差異
            1. ##### 開發者本機裝的是 .NET 8.0.1，但 CI/CD server 裝的是 .NET 8.0.4，編譯或執行出現不一致。
        2. ##### 本機環境污染：
            1. ##### 開發者同時需要維護 .NET 6、.NET 7、.NET 8 的專案，在同一台電腦裝多版本 SDK，容易衝突。      
        3. ##### 部署複雜：
            1. ##### 伺服器要先安裝 .NET Runtime，再配置 IIS 或 Kestrel。
            2. ##### 若要更新，得先停掉服務、手動替換 DLL，風險高且容易出錯。
  #
  #
  #
  #   
    3. ##### 伺服器端（整體運行環境）（.NET 8 Web API）：
        1. ##### 環境一致性難維護
            1. ##### 測試機、UAT、正式機各自安裝不同版本的 Node.js、.NET Runtime。
            2. ##### 部署同一個版本的程式，卻因環境差異導致 bug。   
        2. ##### 依賴安裝麻煩：
            1. ##### 除了 .NET 和 Node.js，還可能需要 Nginx/Apache、資料庫驅動、系統套件。
            2. ##### 每次搬遷伺服器，都要重頭安裝一次環境。
        3. ##### 資源浪費 & 擴展困難：
            1. ##### 每個應用獨佔一台 VM，導致資源利用率低。
            2. ##### 要擴展服務時，必須手動新增 VM，耗時且成本高。  
  #
  #
  #
  # 
* ##### 上面問題，容器化都能解決：
    1. ##### 用 Docker 映像檔 固定版本（Node.js、.NET、依賴）。
    2. ##### 新人只需 docker-compose up 就能開發。
    3. ##### 部署時只需把容器丟到伺服器，不必手動安裝 SDK 或環境。

##### Prompt
``` text
我開發習慣用.NET 8 + Angular Web 應用容器化。請幫我列出前端. 後端. 伺服器端各三個情境（沒容器化的困擾）
```
#
#
#
# 
##### 假設部門總共維護了5個專案，每個專案有各自的開發框架。我們只要把各自的專案編寫成一份docker-compose.yml檔案後，之後只要分別在開發筆電或是遠端伺服器啟動這個compose，就會自動啟動容器，自動建立好環境，讓專案跑起來了。(* 目前只要先知道compose是一個定義並協調多個容器的工具與設定檔即可，這個設定檔描述了多個容器要如何一起運行，是一個啟動器)
---
### Image & Cainter & Compose三者之間的關係
``` text
+---------------------+
|      Dockerfile     |
|  (程式碼 + 設定檔)  |
+---------------------+
          │ build
          ▼
+---------------------+
|       Image         |   ← 不可變的藍圖 / 模板
| (包含程式與依賴環境) |
+---------------------+
          │ run
          ▼
+---------------------+
|     Container       |   ← 運行中的實體（可有多個）
| (基於 Image 啟動)   |
+---------------------+
          │ managed by
          ▼
+---------------------+
|   Docker Compose    |   ← 定義 & 協調多個 Container
| (services / network |
|   / volume 等設定)  |
+---------------------+

```
* ##### 口語版解釋：
    1. ##### 像「程式安裝檔」，定義了程式與環境。
    2. ##### 像「安裝後正在跑的程式」，是 Image 的運行實例。
    3. ##### 像「專案配置檔」，告訴 Docker：要跑哪些容器、怎麼連接、用什麼環境變數。

